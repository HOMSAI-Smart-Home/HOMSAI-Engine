CREATE CACHED TABLE "PUBLIC"."HVAC_EQUIPMENTS"(
    "UUID" UUID NOT NULL,
    "CREATED_AT" TIMESTAMP NOT NULL,
    "DELETED_AT" TIMESTAMP,
    "ORIGIN_REFERENCE" VARCHAR(255),
    "UPDATED_AT" TIMESTAMP NOT NULL,
    "VERSION" BIGINT NOT NULL,
    "NAME" VARCHAR(255),
    "SEASON" INTEGER,
    "MINIMUM_IDLE_MINUTES" INTEGER,
    "MINIMUM_EXECUTION_MINUTES" INTEGER,
    "SWITCH_REQUIRED" BOOLEAN
);
ALTER TABLE "PUBLIC"."HVAC_EQUIPMENTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_10" PRIMARY KEY("UUID");

ALTER TABLE "PUBLIC"."HOME_INFO" ADD "HVAC_SUMMER_POWER_METER_ID" VARCHAR(255);
ALTER TABLE "PUBLIC"."HOME_INFO" ADD "HVAC_WINTER_POWER_METER_ID" VARCHAR(255);
ALTER TABLE "PUBLIC"."HOME_INFO" ADD "OPTIMIZER_MODE" INTEGER;
ALTER TABLE "PUBLIC"."HOME_INFO" ADD "HVAC_SWITCH_ENTITY_ID" VARCHAR(255);
ALTER TABLE "PUBLIC"."HOME_INFO" ADD "CURRENT_WINTER_HVAC_EQUIPMENT_UUID" UUID;
ALTER TABLE "PUBLIC"."HOME_INFO" ADD "CURRENT_SUMMER_HVAC_EQUIPMENT_UUID" UUID;
ALTER TABLE "PUBLIC"."HOME_INFO" ADD CONSTRAINT "PUBLIC"."FKJY7PS9PF1PS80UMDFFYAF7GC5" FOREIGN KEY("CURRENT_WINTER_HVAC_EQUIPMENT_UUID") REFERENCES "PUBLIC"."HVAC_EQUIPMENTS"("UUID") NOCHECK;
ALTER TABLE "PUBLIC"."HOME_INFO" ADD CONSTRAINT "PUBLIC"."FKJY7PS9PF1PS80UMDFFYAF7GC6" FOREIGN KEY("CURRENT_SUMMER_HVAC_EQUIPMENT_UUID") REFERENCES "PUBLIC"."HVAC_EQUIPMENTS"("UUID") NOCHECK;

UPDATE "PUBLIC"."HVAC_DEVICES" SET "TYPE" = 1 WHERE "TYPE" IS NULL;
UPDATE "PUBLIC"."HOME_INFO" SET "OPTIMIZER_MODE" = 0;

INSERT INTO "PUBLIC"."HVAC_EQUIPMENTS" (UUID, CREATED_AT, UPDATED_AT, VERSION, NAME, SEASON, MINIMUM_IDLE_MINUTES, MINIMUM_EXECUTION_MINUTES, SWITCH_REQUIRED) VALUES ('b43154d1-fe30-4744-91d1-22973fcea350', '2022-01-01 00:00:00.000', '2022-01-01 00:00:00.000', 0, 'radiant_floor_heater', 0, 55, 115, TRUE);
INSERT INTO "PUBLIC"."HVAC_EQUIPMENTS" (UUID, CREATED_AT, UPDATED_AT, VERSION, NAME, SEASON, MINIMUM_IDLE_MINUTES, MINIMUM_EXECUTION_MINUTES, SWITCH_REQUIRED) VALUES ('8b3c7d78-b7db-455a-add3-7fcca027ea99', '2022-01-01 00:00:00.000', '2022-01-01 00:00:00.000', 0, 'split', 0, 25, 25, FALSE);
INSERT INTO "PUBLIC"."HVAC_EQUIPMENTS" (UUID, CREATED_AT, UPDATED_AT, VERSION, NAME, SEASON, MINIMUM_IDLE_MINUTES, MINIMUM_EXECUTION_MINUTES, SWITCH_REQUIRED) VALUES ('ca13dd87-5327-43c3-8b64-fa1664d40d8f', '2022-01-01 00:00:00.000', '2022-01-01 00:00:00.000', 0, 'radiator', 0, 25, 55, TRUE);
INSERT INTO "PUBLIC"."HVAC_EQUIPMENTS" (UUID, CREATED_AT, UPDATED_AT, VERSION, NAME, SEASON, MINIMUM_IDLE_MINUTES, MINIMUM_EXECUTION_MINUTES, SWITCH_REQUIRED) VALUES ('a1d91e2a-21e4-43f1-bced-ca95962494a9', '2022-01-01 00:00:00.000', '2022-01-01 00:00:00.000', 0, 'electric_radiator', 0, 25, 55, TRUE);
INSERT INTO "PUBLIC"."HVAC_EQUIPMENTS" (UUID, CREATED_AT, UPDATED_AT, VERSION, NAME, SEASON, MINIMUM_IDLE_MINUTES, MINIMUM_EXECUTION_MINUTES, SWITCH_REQUIRED) VALUES ('f98c301b-6ff2-41ba-b5df-f0e2e00e96c8', '2022-01-01 00:00:00.000', '2022-01-01 00:00:00.000', 0, 'split', 1, 25, 25, FALSE);
